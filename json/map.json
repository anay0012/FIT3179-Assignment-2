{
  "$schema": "https://vega.github.io/schema/vega-lite/v5.json",
  "width": 1000,
  "height": 500,
  "title": "Coral Reef Bleaching Around the World",
  "projection": {
    "type": "equirectangular"
  },
  "layer": [
    {
      "data": {
        "url": "https://raw.githubusercontent.com/anay0012/FIT3179-Assignment-2/refs/heads/main/json/ne_110m_land%20(1).json",
        "format": {
          "type": "topojson",
          "feature": "ne_110m_land"
        }
      },
      "mark": {
        "type": "geoshape",
        "fill": "powderblue",
        "stroke": "black"
      }
    },
    {
      "data": {
        "url": "https://raw.githubusercontent.com/anay0012/FIT3179-Assignment-2/refs/heads/main/data/global_bleaching_environmental.csv"
      },
      "params": [
        {
          "name": "percentage_bleaching",
          "select": {
            "type": "point",
            "fields": ["Percentage_Bleaching"]
          },
          "bind":"scales"
        }
      ],
      "mark": {
        "type": "square",
        "size":100,
        "stroke": "black"
      },
      "encoding": {
        "longitude": {
          "field": "Longitude_Degrees",
          "type": "quantitative"
        },
        "latitude": {
          "field": "Latitude_Degrees",
          "type": "quantitative"
        },
        "color": {
          "field": "Percent_Bleaching",
          "type": "quantitative",
          "title": "Percent Bleaching (%)",
          "scale": {
            "domain": [
              "0",
              "20",
              "40",
              "60",
              "80",
              "100"
            ],
            "range": [
              "white",
              "darkgreen",
              "lightgreen",
              "yellow",
              "red",
              "black"
            ]
          }
        },
        "opacity": {
          "condition": {
            "param": "percentage_bleaching",
            "value": 0.6
          },
          "value": 0.2
        },
        "tooltip": [
          {
            "field": "Country_Name",
            "type": "nominal",
            "title": "Country:"
          },
          {
            "field": "Ocean_Name",
            "type": "nominal",
            "title": "Ocean:"
          },
          {
            "field": "Percent_Bleaching",
            "type": "quantitative",
            "title": "Bleaching (%):"
          }
        ]
      }
    }
  ]
}